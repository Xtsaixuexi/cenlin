# â„ï¸ æ£®æ—å†°ç«äººç½‘ç»œç‰ˆ ğŸ”¥

ä¸€ä¸ªåŸºäº C# TCP ç½‘ç»œç¼–ç¨‹çš„åŒäººåˆä½œæ¸¸æˆï¼Œä½¿ç”¨ TcpClient å’Œ TcpListener å®ç°ç½‘ç»œé€šä¿¡ã€‚

![Game Preview](https://img.shields.io/badge/Platform-Windows-blue) ![.NET](https://img.shields.io/badge/.NET-8.0-purple) ![License](https://img.shields.io/badge/License-MIT-green)

## ğŸ® æ¸¸æˆç®€ä»‹

æ£®æ—å†°ç«äººæ˜¯ä¸€æ¬¾ç»å…¸çš„åŒäººåˆä½œæ¸¸æˆï¼š
- **å†°äºº** â„ï¸ - è“è‰²è§’è‰²ï¼Œå¯ä»¥é€šè¿‡å†°åŒºåŸŸï¼Œä½†æ€•ç«
- **ç«äºº** ğŸ”¥ - çº¢è‰²è§’è‰²ï¼Œå¯ä»¥é€šè¿‡ç«åŒºåŸŸï¼Œä½†æ€•å†°
- **ç›®æ ‡** - ä¸¤äººåˆä½œæ”¶é›†å®çŸ³ï¼Œåˆ°è¾¾å„è‡ªçš„å‡ºå£é—¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
cenlin/
â”œâ”€â”€ Shared/                 # å…±äº«ç±»åº“
â”‚   â”œâ”€â”€ GameEntities.cs     # æ¸¸æˆå®ä½“ï¼ˆç©å®¶ã€åœ°å›¾ã€å®çŸ³ç­‰ï¼‰
â”‚   â”œâ”€â”€ NetworkProtocol.cs  # ç½‘ç»œåè®®å’Œæ¶ˆæ¯å®šä¹‰
â”‚   â”œâ”€â”€ GameConfig.cs       # æ¸¸æˆé…ç½®å¸¸é‡
â”‚   â”œâ”€â”€ LevelGenerator.cs   # å…³å¡ç”Ÿæˆå™¨
â”‚   â””â”€â”€ Shared.csproj
â”‚
â”œâ”€â”€ Server/                 # æ¸¸æˆæœåŠ¡å™¨ (TcpListener)
â”‚   â”œâ”€â”€ Program.cs          # æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ GameServer.cs       # TCPæœåŠ¡å™¨å®ç°
â”‚   â”œâ”€â”€ GameLogic.cs        # æ¸¸æˆé€»è¾‘å¤„ç†
â”‚   â””â”€â”€ Server.csproj
â”‚
â”œâ”€â”€ GameClient/             # WinFormså›¾å½¢åŒ–å®¢æˆ·ç«¯ (TcpClient)
â”‚   â”œâ”€â”€ Program.cs          # å®¢æˆ·ç«¯å…¥å£
â”‚   â”œâ”€â”€ MainForm.cs         # ä¸»æ¸¸æˆçª—å£
â”‚   â”œâ”€â”€ GameRenderer.cs     # æ¸¸æˆå›¾å½¢æ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ NetworkClient.cs    # TCPå®¢æˆ·ç«¯å®ç°
â”‚   â”œâ”€â”€ ConnectDialog.cs    # è¿æ¥å¯¹è¯æ¡†
â”‚   â””â”€â”€ GameClient.csproj
â”‚
â”œâ”€â”€ IceFireMan.sln          # Visual Studio è§£å†³æ–¹æ¡ˆ
â””â”€â”€ README.md
```

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11
- **.NET SDK**: 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **IDE**: Visual Studio 2022 (å¯é€‰) æˆ– VS Code

### å®‰è£… .NET SDK

1. è®¿é—® https://dotnet.microsoft.com/download
2. ä¸‹è½½å¹¶å®‰è£… .NET 8.0 SDK
3. éªŒè¯å®‰è£…ï¼š
```powershell
dotnet --version
```

## ğŸš€ è¿è¡Œæ–¹æ³•

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å‘½ä»¤è¡Œ

**ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æœåŠ¡å™¨**
```powershell
cd C:\Users\zhang\Desktop\cenlin\Server
dotnet run
```

**ç¬¬äºŒæ­¥ï¼šå¯åŠ¨å®¢æˆ·ç«¯ï¼ˆæ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼‰**
```powershell
cd C:\Users\zhang\Desktop\cenlin\GameClient
dotnet run
```

**ç¬¬ä¸‰æ­¥ï¼šå†å¯åŠ¨ä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆå¦ä¸€ä¸ªç©å®¶ï¼‰**
```powershell
cd C:\Users\zhang\Desktop\cenlin\GameClient
dotnet run
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨ Visual Studio

1. åŒå‡»æ‰“å¼€ `IceFireMan.sln`
2. å³é”®è§£å†³æ–¹æ¡ˆ â†’ è®¾ç½®å¯åŠ¨é¡¹ç›® â†’ å¤šä¸ªå¯åŠ¨é¡¹ç›®
3. å°† Server å’Œ GameClient éƒ½è®¾ä¸º"å¯åŠ¨"
4. æŒ‰ F5 è¿è¡Œ

## ğŸ¯ æ¸¸æˆæ§åˆ¶

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| `A` / `â†` | å‘å·¦ç§»åŠ¨ |
| `D` / `â†’` | å‘å³ç§»åŠ¨ |
| `W` / `â†‘` / `ç©ºæ ¼` | è·³è·ƒ |
| `R` | é‡æ–°å¼€å§‹ |
| `Enter` | å‘é€èŠå¤©æ¶ˆæ¯ |

## ğŸŒ ç½‘ç»œæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         TCP          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GameClient    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
â”‚   (WinForms)    â”‚     TcpClient        â”‚                 â”‚
â”‚   ç©å®¶1 - å†°äºº   â”‚                      â”‚   GameServer    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  (TcpListener)  â”‚
                                         â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         TCP          â”‚   ç«¯å£: 9527    â”‚
â”‚   GameClient    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚
â”‚   (WinForms)    â”‚     TcpClient        â”‚                 â”‚
â”‚   ç©å®¶2 - ç«äºº   â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç½‘ç»œåè®®

- ä½¿ç”¨è‡ªå®šä¹‰äºŒè¿›åˆ¶åè®®
- æ¶ˆæ¯æ ¼å¼: `[4å­—èŠ‚é•¿åº¦][ç±»å‹åé•¿åº¦][ç±»å‹å][JSONæ•°æ®é•¿åº¦][JSONæ•°æ®]`
- æ”¯æŒçš„æ¶ˆæ¯ç±»å‹ï¼š
  - `ConnectMessage` - è¿æ¥è¯·æ±‚
  - `PlayerInputMessage` - ç©å®¶è¾“å…¥
  - `GameStateMessage` - æ¸¸æˆçŠ¶æ€åŒæ­¥
  - `ChatMessagePacket` - èŠå¤©æ¶ˆæ¯

## ğŸ¨ æ¸¸æˆå…ƒç´ 

| ç¬¦å· | åç§° | è¯´æ˜ |
|------|------|------|
| `I` | å†°äºº | è“è‰²ç©å®¶è§’è‰² |
| `F` | ç«äºº | çº¢è‰²ç©å®¶è§’è‰² |
| `â–ˆ` | å¢™å£ | ä¸å¯é€šè¿‡ |
| `â•` | å¹³å° | å¯ç«™ç«‹ |
| `~` | å†°åŒºåŸŸ | åªæœ‰å†°äººå¯é€šè¿‡ |
| `^` | ç«åŒºåŸŸ | åªæœ‰ç«äººå¯é€šè¿‡ |
| `â‰ˆ` | æ°´ | ä¸¤è€…éƒ½ä¼šæ­»äº¡ |
| `â—†` | å†°å®çŸ³ | å†°äººæ”¶é›† |
| `â—‡` | ç«å®çŸ³ | ç«äººæ”¶é›† |
| `â–£` | å†°é—¨ | å†°äººå‡ºå£ |
| `â–¢` | ç«é—¨ | ç«äººå‡ºå£ |

## ğŸ“ å¼€å‘è¯´æ˜

### æ ¸å¿ƒç±»è¯´æ˜

**æœåŠ¡å™¨ç«¯ (Server)**
- `GameServer.cs` - ä½¿ç”¨ TcpListener ç›‘å¬è¿æ¥ï¼Œç®¡ç†ç©å®¶ä¼šè¯
- `GameLogic.cs` - æ¸¸æˆç‰©ç†å¼•æ“ï¼Œç¢°æ’æ£€æµ‹ï¼Œèƒœè´Ÿåˆ¤å®š

**å®¢æˆ·ç«¯ (GameClient)**
- `NetworkClient.cs` - ä½¿ç”¨ TcpClient è¿æ¥æœåŠ¡å™¨
- `GameRenderer.cs` - ä½¿ç”¨ GDI+ ç»˜åˆ¶æ¸¸æˆç”»é¢
- `MainForm.cs` - WinForms ä¸»çª—å£ï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥

**å…±äº«åº“ (Shared)**
- `NetworkProtocol.cs` - æ¶ˆæ¯åºåˆ—åŒ–/ååºåˆ—åŒ–
- `GameEntities.cs` - æ¸¸æˆå®ä½“å®šä¹‰

### æ‰©å±•å»ºè®®

1. **æ·»åŠ æ›´å¤šå…³å¡** - ä¿®æ”¹ `LevelGenerator.cs`
2. **æ·»åŠ éŸ³æ•ˆ** - ä½¿ç”¨ NAudio åº“
3. **æ·»åŠ æ›´å¤šè§’è‰²ç‰¹æ•ˆ** - ä¿®æ”¹ `GameRenderer.cs`
4. **æ”¯æŒå±€åŸŸç½‘è‡ªåŠ¨å‘ç°** - æ·»åŠ  UDP å¹¿æ’­

## ğŸ“œ è®¸å¯è¯

MIT License - å¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**å¼€å‘è€…**: AI Assistant  
**æŠ€æœ¯æ ˆ**: C#, .NET 8.0, WinForms, TCP/IP

